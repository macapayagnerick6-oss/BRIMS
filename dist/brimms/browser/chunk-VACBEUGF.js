import{c as I,d as F}from"./chunk-DUWH3AKD.js";import{$a as n,Ea as x,Ia as w,Pb as k,Sa as f,Ta as _,Ua as C,Ub as q,Vb as T,Xa as O,Ya as y,Za as R,_a as e,ab as m,cb as h,db as P,jb as u,kb as M,lb as a,mb as c,nb as S,ob as v,wb as E,xa as r,yb as p,zb as g}from"./chunk-PQPYQFLK.js";var A=(i,l)=>({"badge--success":i,"badge--warning":l}),B=(i,l)=>l.id;function D(i,l){if(i&1&&(e(0,"div",6)(1,"h2"),a(2,"My Certificate Requests"),n(),e(3,"div",7)(4,"div",8)(5,"span",9),a(6,"Total Requests"),n(),e(7,"span",10),a(8),p(9,"number"),n()(),e(10,"div",11)(11,"span",9),a(12,"Approved"),n(),e(13,"span",10),a(14),p(15,"number"),n()(),e(16,"div",12)(17,"span",9),a(18,"Pending"),n(),e(19,"span",10),a(20),p(21,"number"),n()(),e(22,"div",13)(23,"span",9),a(24,"For Review"),n(),e(25,"span",10),a(26),p(27,"number"),n()()(),e(28,"div",14)(29,"h3"),a(30,"Request Status Breakdown"),n(),e(31,"div",15)(32,"div",16)(33,"span",17),a(34,"Approved"),n(),e(35,"div",18),m(36,"div",19),n(),e(37,"span",20),a(38),n()(),e(39,"div",16)(40,"span",17),a(41,"Pending"),n(),e(42,"div",18),m(43,"div",21),n(),e(44,"span",20),a(45),n()(),e(46,"div",16)(47,"span",17),a(48,"For Review"),n(),e(49,"div",18),m(50,"div",22),n(),e(51,"span",20),a(52),n()()()()()),i&2){let t=P().getMyRequestStats();r(8),c(g(9,16,t.total)),r(6),c(g(15,18,t.approved)),r(6),c(g(21,20,t.pending)),r(6),c(g(27,22,t.forReview)),r(10),u("width",t.total>0?t.approved/t.total*100:0,"%"),r(2),v("",t.approved," (",t.total>0?(t.approved/t.total*100).toFixed(0):0,"%)"),r(5),u("width",t.total>0?t.pending/t.total*100:0,"%"),r(2),v("",t.pending," (",t.total>0?(t.pending/t.total*100).toFixed(0):0,"%)"),r(5),u("width",t.total>0?t.forReview/t.total*100:0,"%"),r(2),v("",t.forReview," (",t.total>0?(t.forReview/t.total*100).toFixed(0):0,"%)")}}function j(i,l){if(i&1&&(e(0,"tr")(1,"td"),a(2),n(),e(3,"td"),a(4),n(),e(5,"td"),a(6),n(),e(7,"td")(8,"span",26),a(9),n()()()),i&2){let t=l.$implicit;r(2),c(t.date),r(2),c(t.type),r(2),c(t.purpose),r(2),R("ngClass",E(5,A,t.status==="Approved",t.status==="Pending"||t.status==="For Review"||t.status==="Rejected")),r(),S(" ",t.status," ")}}function H(i,l){i&1&&(e(0,"tr")(1,"td",27),a(2,"No requests found"),n()())}function N(i,l){if(i&1&&(e(0,"div",6)(1,"h2"),a(2,"Request History"),n(),e(3,"p",23),a(4,"Complete history of all your certificate requests."),n(),e(5,"div",24)(6,"table",25)(7,"thead")(8,"tr")(9,"th"),a(10,"Date"),n(),e(11,"th"),a(12,"Certificate Type"),n(),e(13,"th"),a(14,"Purpose"),n(),e(15,"th"),a(16,"Status"),n()()(),e(17,"tbody"),O(18,j,10,8,"tr",null,B,!1,H,3,0,"tr"),n()()()()),i&2){let t=P();r(18),y(t.getMyRequests())}}var L=(()=>{class i{constructor(t,o){this.data=t,this.auth=o,this.activeTab="requests"}setActiveTab(t){this.activeTab=t}getMyRequests(){let t=this.auth.currentUser;if(!t||t.role!=="resident")return[];let o=this.data.getResidentById(t.id);return this.data.getRequestsByResidentId(o?.residentId??"")}getMyRequestStats(){let t=this.getMyRequests(),o=t.length,s=t.filter(d=>d.status==="Approved").length,b=t.filter(d=>d.status==="Pending").length,z=t.filter(d=>d.status==="For Review").length;return{total:o,approved:s,pending:b,forReview:z}}static{this.\u0275fac=function(o){return new(o||i)(x(I),x(F))}}static{this.\u0275cmp=w({type:i,selectors:[["app-resident-reports"]],decls:12,vars:8,consts:[[1,"resident-reports-page"],[1,"page-title"],[1,"tabs-wrapper"],["role","tablist",1,"tabs"],["type","button","role","tab",1,"tab-button",3,"click"],[1,"tab-content"],[1,"card"],[1,"stats-grid"],[1,"stat-card","stat-card--blue"],[1,"stat-label"],[1,"stat-value"],[1,"stat-card","stat-card--success"],[1,"stat-card","stat-card--warning"],[1,"stat-card","stat-card--info"],[1,"section"],[1,"status-breakdown"],[1,"status-item"],[1,"status-label"],[1,"status-bar"],[1,"status-fill","status-fill--success"],[1,"status-count"],[1,"status-fill","status-fill--warning"],[1,"status-fill","status-fill--info"],[1,"muted"],[1,"table-wrap"],[1,"table"],[1,"badge",3,"ngClass"],["colspan","4",1,"empty-state"]],template:function(o,s){o&1&&(e(0,"div",0)(1,"h1",1),a(2,"My Reports"),n(),e(3,"div",2)(4,"nav",3)(5,"button",4),h("click",function(){return s.setActiveTab("requests")}),a(6," Certificate Requests "),n(),e(7,"button",4),h("click",function(){return s.setActiveTab("history")}),a(8," Request History "),n()()(),e(9,"div",5),_(10,D,53,24,"div",6),_(11,N,21,1,"div",6),n()()),o&2&&(r(5),M("active",s.activeTab==="requests"),f("aria-selected",s.activeTab==="requests"),r(2),M("active",s.activeTab==="history"),f("aria-selected",s.activeTab==="history"),r(3),C(s.activeTab==="requests"?10:-1),r(),C(s.activeTab==="history"?11:-1))},dependencies:[T,k,q],styles:[".resident-reports-page[_ngcontent-%COMP%]{width:100%}.page-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin:0 0 1.5rem}.tabs-wrapper[_ngcontent-%COMP%]{margin-bottom:1.75rem}.tabs[_ngcontent-%COMP%]{display:inline-flex;gap:0;padding:6px;background:var(--color-bg);border-radius:var(--radius-lg);border:1px solid var(--color-border);box-shadow:0 1px 3px #0000000f;width:100%;max-width:100%;overflow-x:auto;flex-wrap:wrap}.tabs[_ngcontent-%COMP%]::-webkit-scrollbar{height:4px}.tabs[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--color-border);border-radius:4px}.tab-button[_ngcontent-%COMP%]{flex:1;min-width:0;padding:12px 20px;background:transparent;border:none;border-radius:calc(var(--radius-lg) - 4px);color:var(--color-text-muted);font-weight:500;font-size:.9375rem;cursor:pointer;transition:color .2s ease,background .2s ease,box-shadow .2s ease;white-space:nowrap}.tab-button[_ngcontent-%COMP%]:hover:not(.active){color:var(--color-text);background:#0000000a}.tab-button.active[_ngcontent-%COMP%]{color:#fff;background:var(--color-primary);box-shadow:0 2px 8px #2563eb59}.tab-content[_ngcontent-%COMP%]{min-height:400px}.card[_ngcontent-%COMP%]{background:var(--color-bg-card);border-radius:var(--radius-lg);box-shadow:var(--shadow);padding:1.5rem}.card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 1.5rem;font-size:1.25rem;font-weight:600}.card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:1.5rem 0 1rem;font-size:1.125rem;font-weight:600;color:var(--color-text)}.card[_ngcontent-%COMP%]   .muted[_ngcontent-%COMP%]{color:var(--color-text-muted);margin-bottom:1rem}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:1rem;margin-bottom:1.5rem}.stat-card[_ngcontent-%COMP%]{padding:1.25rem 1.5rem;border-radius:var(--radius-lg);background:var(--color-bg-card);border:1px solid var(--color-border);display:flex;flex-direction:column;gap:4px}.stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-muted);display:block}.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:var(--color-text)}.stat-card--blue[_ngcontent-%COMP%]{background:var(--color-primary);border-color:var(--color-primary);color:#fff}.stat-card--blue[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%], .stat-card--blue[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#fff}.stat-card--success[_ngcontent-%COMP%]{background:var(--color-success-bg);border-color:var(--color-success)}.stat-card--success[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:var(--color-success)}.stat-card--warning[_ngcontent-%COMP%]{background:var(--color-warning-bg);border-color:var(--color-warning)}.stat-card--warning[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:var(--color-warning)}.stat-card--info[_ngcontent-%COMP%]{background:var(--color-primary-bg);border-color:var(--color-primary-light)}.stat-card--info[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:var(--color-primary)}.section[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1.5rem;border-top:1px solid var(--color-border)}.status-breakdown[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.status-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.status-label[_ngcontent-%COMP%]{min-width:100px;font-weight:500;color:var(--color-text)}.status-bar[_ngcontent-%COMP%]{flex:1;height:24px;background:var(--color-border);border-radius:12px;overflow:hidden;position:relative}.status-fill[_ngcontent-%COMP%]{height:100%;border-radius:12px;transition:width .3s ease}.status-fill--success[_ngcontent-%COMP%]{background:var(--color-success)}.status-fill--warning[_ngcontent-%COMP%]{background:var(--color-warning)}.status-fill--info[_ngcontent-%COMP%]{background:var(--color-primary)}.status-count[_ngcontent-%COMP%]{min-width:80px;text-align:right;font-weight:500;color:var(--color-text-muted);font-size:.875rem}.table-wrap[_ngcontent-%COMP%]{overflow-x:auto;margin-top:1rem}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;border-bottom:1px solid var(--color-border)}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text-muted);font-size:.875rem;background:var(--color-bg)}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background:var(--color-bg)}.table[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;color:var(--color-text-muted);padding:2rem}.badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;font-size:.75rem;font-weight:500;border-radius:9999px}.badge--success[_ngcontent-%COMP%]{background:var(--color-success-bg);color:var(--color-success)}.badge--warning[_ngcontent-%COMP%]{background:var(--color-warning-bg);color:var(--color-warning)}.badge--info[_ngcontent-%COMP%]{background:var(--color-primary-bg);color:var(--color-primary)}"]})}}return i})();export{L as ResidentReportsComponent};
