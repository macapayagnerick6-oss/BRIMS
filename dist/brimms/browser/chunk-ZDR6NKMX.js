import{c as A}from"./chunk-SNJKFSQO.js";import{c as H}from"./chunk-DUWH3AKD.js";import{$a as e,Ea as w,Ia as I,Pb as D,Sa as _,Ta as f,Ua as E,Ub as q,Vb as F,Xa as x,Ya as C,Za as S,_a as t,ab as P,cb as k,db as M,f as T,kb as O,lb as i,mb as s,nb as h,wb as B,xa as r,yb as p,zb as m}from"./chunk-PQPYQFLK.js";var z=(o,d)=>({"badge--success":o,"badge--warning":d}),y=(o,d)=>d.name,G=(o,d)=>d.id;function $(o,d){if(o&1&&(t(0,"tr")(1,"td"),i(2),e(),t(3,"td"),i(4),e(),t(5,"td"),i(6),e()()),o&2){let n=d.$implicit;r(2),s(n.name),r(2),s(n.count),r(2),h("",n.percentage,"%")}}function j(o,d){if(o&1&&(t(0,"div",6)(1,"h2"),i(2,"Resident Statistics"),e(),t(3,"div",7)(4,"div",8)(5,"span",9),i(6,"Total Residents"),e(),t(7,"span",10),i(8),p(9,"number"),e()(),t(10,"div",11)(11,"span",9),i(12,"Male"),e(),t(13,"span",10),i(14),p(15,"number"),e()(),t(16,"div",12)(17,"span",9),i(18,"Female"),e(),t(19,"span",10),i(20),p(21,"number"),e()(),t(22,"div",13)(23,"span",9),i(24,"Senior Citizens (60+)"),e(),t(25,"span",10),i(26),p(27,"number"),e()(),t(28,"div",14)(29,"span",9),i(30,"Adults (18-59)"),e(),t(31,"span",10),i(32),p(33,"number"),e()(),t(34,"div",14)(35,"span",9),i(36,"Minors (<18)"),e(),t(37,"span",10),i(38),p(39,"number"),e()()(),t(40,"div",15)(41,"div",16)(42,"h3",17),i(43,"Residents by Purok (Bar)"),e(),t(44,"div",18),P(45,"canvas",19),e()(),t(46,"div",16)(47,"h3",17),i(48,"Age Group Distribution (Line)"),e(),t(49,"div",18),P(50,"canvas",19),e()()(),t(51,"div",20)(52,"h3"),i(53,"Distribution by Purok"),e(),t(54,"table",21)(55,"thead")(56,"tr")(57,"th"),i(58,"Purok"),e(),t(59,"th"),i(60,"Residents"),e(),t(61,"th"),i(62,"Percentage"),e()()(),t(63,"tbody"),x(64,$,7,3,"tr",null,y),e()()()()),o&2){let n=M(),a=n.getResidentStats();r(8),s(m(9,12,a.total)),r(6),s(m(15,14,a.male)),r(6),s(m(21,16,a.female)),r(6),s(m(27,18,a.senior)),r(6),s(m(33,20,a.adult)),r(6),s(m(39,22,a.minor)),r(7),S("type","bar")("data",n.residentPurokBarData)("options",n.barChartOptions),r(5),S("type","line")("data",n.ageGroupLineData)("options",n.lineChartOptions),r(14),C(n.getResidentPuroks())}}function L(o,d){if(o&1&&(t(0,"tr")(1,"td"),i(2),e(),t(3,"td"),i(4),e(),t(5,"td"),i(6),e()()),o&2){let n=d.$implicit;r(2),s(n.name),r(2),s(n.count),r(2),h("",n.percentage,"%")}}function W(o,d){if(o&1&&(t(0,"div",6)(1,"h2"),i(2,"Household Statistics"),e(),t(3,"div",7)(4,"div",8)(5,"span",9),i(6,"Total Households"),e(),t(7,"span",10),i(8),p(9,"number"),e()(),t(10,"div",11)(11,"span",9),i(12,"Total Members"),e(),t(13,"span",10),i(14),p(15,"number"),e()(),t(16,"div",12)(17,"span",9),i(18,"Average Members"),e(),t(19,"span",10),i(20),e()()(),t(21,"div",15)(22,"div",16)(23,"h3",17),i(24,"Households by Purok (Bar)"),e(),t(25,"div",18),P(26,"canvas",19),e()()(),t(27,"div",20)(28,"h3"),i(29,"Distribution by Purok"),e(),t(30,"table",21)(31,"thead")(32,"tr")(33,"th"),i(34,"Purok"),e(),t(35,"th"),i(36,"Households"),e(),t(37,"th"),i(38,"Percentage"),e()()(),t(39,"tbody"),x(40,L,7,3,"tr",null,y),e()()()()),o&2){let n=M(),a=n.getHouseholdStats();r(8),s(m(9,6,a.total)),r(6),s(m(15,8,a.totalMembers)),r(6),s(a.avgMembers),r(6),S("type","bar")("data",n.householdPurokBarData)("options",n.barChartOptions),r(14),C(n.getHouseholdPuroks())}}function Z(o,d){if(o&1&&(t(0,"tr")(1,"td"),i(2),e(),t(3,"td"),i(4),e(),t(5,"td"),i(6),e()()),o&2){let n=d.$implicit;r(2),s(n.name),r(2),s(n.count),r(2),h("",n.percentage,"%")}}function N(o,d){if(o&1&&(t(0,"tr")(1,"td"),i(2),e(),t(3,"td"),i(4),e(),t(5,"td")(6,"span",22),i(7),e()(),t(8,"td"),i(9),e()()),o&2){let n=d.$implicit;r(2),s(n.type),r(2),s(n.purpose),r(2),S("ngClass",B(5,z,n.status==="Approved",n.status==="Pending"||n.status==="For Review")),r(),h(" ",n.status," "),r(2),s(n.date)}}function J(o,d){if(o&1&&(t(0,"div",6)(1,"h2"),i(2,"Certificate Request Statistics"),e(),t(3,"div",7)(4,"div",8)(5,"span",9),i(6,"Total Requests"),e(),t(7,"span",10),i(8),p(9,"number"),e()(),t(10,"div",12)(11,"span",9),i(12,"Approved"),e(),t(13,"span",10),i(14),p(15,"number"),e()(),t(16,"div",13)(17,"span",9),i(18,"Pending"),e(),t(19,"span",10),i(20),p(21,"number"),e()(),t(22,"div",14)(23,"span",9),i(24,"For Review"),e(),t(25,"span",10),i(26),p(27,"number"),e()()(),t(28,"div",15)(29,"div",16)(30,"h3",17),i(31,"Requests by Certificate Type (Bar)"),e(),t(32,"div",18),P(33,"canvas",19),e()()(),t(34,"div",20)(35,"h3"),i(36,"Requests by Type"),e(),t(37,"table",21)(38,"thead")(39,"tr")(40,"th"),i(41,"Certificate Type"),e(),t(42,"th"),i(43,"Count"),e(),t(44,"th"),i(45,"Percentage"),e()()(),t(46,"tbody"),x(47,Z,7,3,"tr",null,y),e()()(),t(49,"div",20)(50,"h3"),i(51,"Recent Requests"),e(),t(52,"table",21)(53,"thead")(54,"tr")(55,"th"),i(56,"Type"),e(),t(57,"th"),i(58,"Purpose"),e(),t(59,"th"),i(60,"Status"),e(),t(61,"th"),i(62,"Date"),e()()(),t(63,"tbody"),x(64,N,10,8,"tr",null,G),e()()()()),o&2){let n=M(),a=n.getRequestStats();r(8),s(m(9,7,a.total)),r(6),s(m(15,9,a.approved)),r(6),s(m(21,11,a.pending)),r(6),s(m(27,13,a.forReview)),r(7),S("type","bar")("data",n.requestTypeBarData)("options",n.barChartOptions),r(14),C(n.getRequestTypes()),r(17),C(n.data.requests)}}function K(o,d){if(o&1&&(t(0,"tr")(1,"td"),i(2),e(),t(3,"td"),i(4),e(),t(5,"td"),i(6),e(),t(7,"td"),i(8),e()()),o&2){let n=d.$implicit;r(2),s(n.name),r(2),s(n.residents),r(2),s(n.households),r(2),s(n.avgMembers)}}function Q(o,d){if(o&1&&(t(0,"div",6)(1,"h2"),i(2,"Demographics Overview"),e(),t(3,"div",20)(4,"h3"),i(5,"Age Group Distribution"),e(),t(6,"div",7)(7,"div",14)(8,"span",9),i(9,"Minors (<18)"),e(),t(10,"span",10),i(11),p(12,"number"),e(),t(13,"span",23),i(14),e()(),t(15,"div",11)(16,"span",9),i(17,"Adults (18-59)"),e(),t(18,"span",10),i(19),p(20,"number"),e(),t(21,"span",23),i(22),e()(),t(23,"div",13)(24,"span",9),i(25,"Senior Citizens (60+)"),e(),t(26,"span",10),i(27),p(28,"number"),e(),t(29,"span",23),i(30),e()()()(),t(31,"div",20)(32,"h3"),i(33,"Gender Distribution"),e(),t(34,"div",7)(35,"div",11)(36,"span",9),i(37,"Male"),e(),t(38,"span",10),i(39),p(40,"number"),e(),t(41,"span",23),i(42),e()(),t(43,"div",12)(44,"span",9),i(45,"Female"),e(),t(46,"span",10),i(47),p(48,"number"),e(),t(49,"span",23),i(50),e()()()(),t(51,"div",20)(52,"h3"),i(53,"Geographic Distribution"),e(),t(54,"table",21)(55,"thead")(56,"tr")(57,"th"),i(58,"Purok"),e(),t(59,"th"),i(60,"Residents"),e(),t(61,"th"),i(62,"Households"),e(),t(63,"th"),i(64,"Avg Members/Household"),e()()(),t(65,"tbody"),x(66,K,9,4,"tr",null,y),e()()()()),o&2){let n=M(),a=n.getResidentStats();r(11),s(m(12,10,a.minor)),r(3),h("",(a.minor/a.total*100).toFixed(1),"%"),r(5),s(m(20,12,a.adult)),r(3),h("",(a.adult/a.total*100).toFixed(1),"%"),r(5),s(m(28,14,a.senior)),r(3),h("",(a.senior/a.total*100).toFixed(1),"%"),r(9),s(m(40,16,a.male)),r(3),h("",(a.male/a.total*100).toFixed(1),"%"),r(5),s(m(48,18,a.female)),r(3),h("",(a.female/a.total*100).toFixed(1),"%"),r(16),C(n.getDemographicPuroks())}}var nt=(()=>{class o{constructor(n){this.data=n,this.activeTab="residents",this.subscriptions=new T,this.residentPurokBarData={labels:[],datasets:[]},this.ageGroupLineData={labels:[],datasets:[]},this.householdPurokBarData={labels:[],datasets:[]},this.requestTypeBarData={labels:[],datasets:[]},this.barChartOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{boxWidth:12}}},scales:{x:{grid:{display:!1},ticks:{color:"#4b5563",maxRotation:45,minRotation:0}},y:{beginAtZero:!0,grid:{color:"rgba(148, 163, 184, 0.25)"},ticks:{precision:0}}}},this.lineChartOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{boxWidth:12}}},scales:{x:{grid:{display:!1},ticks:{color:"#4b5563"}},y:{beginAtZero:!0,grid:{color:"rgba(148, 163, 184, 0.25)"},ticks:{precision:0}}}}}ngOnInit(){this.updateResidentCharts(),this.updateHouseholdCharts(),this.updateRequestCharts(),this.subscriptions.add(this.data.residentsObservable.subscribe(()=>{this.updateResidentCharts()})),this.subscriptions.add(this.data.householdsObservable.subscribe(()=>{this.updateHouseholdCharts()})),this.subscriptions.add(this.data.requestsObservable.subscribe(()=>{this.updateRequestCharts()}))}ngOnDestroy(){this.subscriptions.unsubscribe()}setActiveTab(n){this.activeTab=n}getResidentStats(){let n=this.data.residents,a=n.length,l=n.filter(u=>u.gender==="Male").length,c=n.filter(u=>u.gender==="Female").length,b=n.filter(u=>u.age>=60).length,v=n.filter(u=>u.age>=18&&u.age<60).length,g=n.filter(u=>u.age<18).length,R={};return n.forEach(u=>{R[u.purok]=(R[u.purok]||0)+1}),{total:a,male:l,female:c,senior:b,adult:v,minor:g,purokCounts:R}}getResidentPuroks(){let n=this.getResidentStats();return Object.keys(n.purokCounts).map(a=>({name:a,count:n.purokCounts[a],percentage:(n.purokCounts[a]/n.total*100).toFixed(1)}))}getHouseholdStats(){let n=this.data.households,a=n.length,l=n.reduce((v,g)=>v+g.members.length,0),c=a>0?(l/a).toFixed(1):0,b={};return n.forEach(v=>{b[v.purok]=(b[v.purok]||0)+1}),{total:a,totalMembers:l,avgMembers:c,purokCounts:b}}getHouseholdPuroks(){let n=this.getHouseholdStats();return Object.keys(n.purokCounts).map(a=>({name:a,count:n.purokCounts[a],percentage:(n.purokCounts[a]/n.total*100).toFixed(1)}))}getRequestStats(){let n=this.data.requests,a=n.length,l=n.filter(g=>g.status==="Approved").length,c=n.filter(g=>g.status==="Pending").length,b=n.filter(g=>g.status==="For Review").length,v={};return n.forEach(g=>{v[g.type]=(v[g.type]||0)+1}),{total:a,approved:l,pending:c,forReview:b,typeCounts:v}}getRequestTypes(){let n=this.getRequestStats();return Object.keys(n.typeCounts).map(a=>({name:a,count:n.typeCounts[a],percentage:(n.typeCounts[a]/n.total*100).toFixed(1)}))}updateResidentCharts(){let n=this.getResidentPuroks();this.residentPurokBarData={labels:n.map(b=>b.name),datasets:[{data:n.map(b=>b.count),label:"Residents",backgroundColor:"#3b82f6",borderRadius:6}]};let a=this.getResidentStats(),l=["Minors (<18)","Adults (18-59)","Senior Citizens (60+)"],c=[a.minor,a.adult,a.senior];this.ageGroupLineData={labels:l,datasets:[{data:c,label:"Age Groups",fill:!1,tension:.3,borderColor:"#6366f1",backgroundColor:"#6366f1",pointBackgroundColor:"#ffffff",pointBorderColor:"#6366f1",pointRadius:4}]}}updateHouseholdCharts(){let n=this.getHouseholdPuroks();this.householdPurokBarData={labels:n.map(a=>a.name),datasets:[{data:n.map(a=>a.count),label:"Households",backgroundColor:"#22c55e",borderRadius:6}]}}updateRequestCharts(){let n=this.getRequestTypes();this.requestTypeBarData={labels:n.map(a=>a.name),datasets:[{data:n.map(a=>a.count),label:"Requests",backgroundColor:"#f97316",borderRadius:6}]}}getDemographicPuroks(){let n=this.getResidentStats(),a=this.getHouseholdStats(),l=new Set([...Object.keys(n.purokCounts),...Object.keys(a.purokCounts)]);return Array.from(l).map(c=>({name:c,residents:n.purokCounts[c]||0,households:a.purokCounts[c]||0,avgMembers:a.purokCounts[c]?((n.purokCounts[c]||0)/a.purokCounts[c]).toFixed(1):"-"}))}static{this.\u0275fac=function(a){return new(a||o)(w(H))}}static{this.\u0275cmp=I({type:o,selectors:[["app-reports"]],decls:18,vars:16,consts:[[1,"reports-page"],[1,"page-title"],[1,"tabs-wrapper"],["role","tablist",1,"tabs"],["type","button","role","tab",1,"tab-button",3,"click"],[1,"tab-content"],[1,"card"],[1,"stats-grid"],[1,"stat-card","stat-card--blue"],[1,"stat-label"],[1,"stat-value"],[1,"stat-card","stat-card--primary"],[1,"stat-card","stat-card--success"],[1,"stat-card","stat-card--warning"],[1,"stat-card","stat-card--info"],[1,"charts-grid"],[1,"chart-card"],[1,"chart-title"],[1,"chart-container"],["baseChart","",3,"type","data","options"],[1,"section"],[1,"table"],[1,"badge",3,"ngClass"],[1,"stat-percentage"]],template:function(a,l){a&1&&(t(0,"div",0)(1,"h1",1),i(2,"Reports & Analytics"),e(),t(3,"div",2)(4,"nav",3)(5,"button",4),k("click",function(){return l.setActiveTab("residents")}),i(6," Resident Statistics "),e(),t(7,"button",4),k("click",function(){return l.setActiveTab("households")}),i(8," Household Statistics "),e(),t(9,"button",4),k("click",function(){return l.setActiveTab("requests")}),i(10," Certificate Requests "),e(),t(11,"button",4),k("click",function(){return l.setActiveTab("demographics")}),i(12," Demographics "),e()()(),t(13,"div",5),f(14,j,66,24,"div",6),f(15,W,42,10,"div",6),f(16,J,66,15,"div",6),f(17,Q,68,20,"div",6),e()()),a&2&&(r(5),O("active",l.activeTab==="residents"),_("aria-selected",l.activeTab==="residents"),r(2),O("active",l.activeTab==="households"),_("aria-selected",l.activeTab==="households"),r(2),O("active",l.activeTab==="requests"),_("aria-selected",l.activeTab==="requests"),r(2),O("active",l.activeTab==="demographics"),_("aria-selected",l.activeTab==="demographics"),r(3),E(l.activeTab==="residents"?14:-1),r(),E(l.activeTab==="households"?15:-1),r(),E(l.activeTab==="requests"?16:-1),r(),E(l.activeTab==="demographics"?17:-1))},dependencies:[F,D,A,q],styles:[".reports-page[_ngcontent-%COMP%]{width:100%}.page-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin:0 0 1.5rem}.tabs-wrapper[_ngcontent-%COMP%]{margin-bottom:1.75rem}.tabs[_ngcontent-%COMP%]{display:inline-flex;gap:0;padding:6px;background:var(--color-bg);border-radius:var(--radius-lg);border:1px solid var(--color-border);box-shadow:0 1px 3px #0000000f;width:100%;max-width:100%;overflow-x:auto;flex-wrap:wrap}.tabs[_ngcontent-%COMP%]::-webkit-scrollbar{height:4px}.tabs[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--color-border);border-radius:4px}.tab-button[_ngcontent-%COMP%]{flex:1;min-width:0;padding:12px 20px;background:transparent;border:none;border-radius:calc(var(--radius-lg) - 4px);color:var(--color-text-muted);font-weight:500;font-size:.9375rem;cursor:pointer;transition:color .2s ease,background .2s ease,box-shadow .2s ease;white-space:nowrap}.tab-button[_ngcontent-%COMP%]:hover:not(.active){color:var(--color-text);background:#0000000a}.tab-button.active[_ngcontent-%COMP%]{color:#fff;background:var(--color-primary);box-shadow:0 2px 8px #2563eb59}.tab-content[_ngcontent-%COMP%]{min-height:400px}.card[_ngcontent-%COMP%]{background:var(--color-bg-card);border-radius:var(--radius-lg);box-shadow:var(--shadow);padding:1.5rem}.card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 1.5rem;font-size:1.25rem;font-weight:600}.card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:1.5rem 0 1rem;font-size:1.125rem;font-weight:600;color:var(--color-text)}.charts-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:1.25rem;margin-top:1.5rem}.chart-card[_ngcontent-%COMP%]{padding:1.25rem 1.5rem;border-radius:var(--radius-lg);background:var(--color-bg-card);border:1px solid var(--color-border);box-shadow:0 1px 2px #0000000a}.chart-card[_ngcontent-%COMP%]   .chart-title[_ngcontent-%COMP%]{margin:0 0 .75rem;font-size:.95rem;font-weight:600;color:var(--color-text)}.chart-container[_ngcontent-%COMP%]{position:relative;width:100%;height:260px}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:1rem;margin-bottom:1.5rem}.stat-card[_ngcontent-%COMP%]{padding:1.25rem 1.5rem;border-radius:var(--radius-lg);background:var(--color-bg-card);border:1px solid var(--color-border);display:flex;flex-direction:column;gap:4px}.stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-muted);display:block}.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:var(--color-text)}.stat-card[_ngcontent-%COMP%]   .stat-percentage[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-muted);margin-top:4px}.stat-card--blue[_ngcontent-%COMP%]{background:var(--color-primary);border-color:var(--color-primary);color:#fff}.stat-card--blue[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%], .stat-card--blue[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%], .stat-card--blue[_ngcontent-%COMP%]   .stat-percentage[_ngcontent-%COMP%]{color:#fff}.stat-card--primary[_ngcontent-%COMP%]{background:var(--color-primary-bg);border-color:var(--color-primary)}.stat-card--primary[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:var(--color-primary)}.stat-card--success[_ngcontent-%COMP%]{background:var(--color-success-bg);border-color:var(--color-success)}.stat-card--success[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:var(--color-success)}.stat-card--warning[_ngcontent-%COMP%]{background:var(--color-warning-bg);border-color:var(--color-warning)}.stat-card--warning[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:var(--color-warning)}.stat-card--info[_ngcontent-%COMP%]{background:var(--color-primary-bg);border-color:var(--color-primary-light)}.stat-card--info[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:var(--color-primary)}.section[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1.5rem;border-top:1px solid var(--color-border)}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:1rem}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;border-bottom:1px solid var(--color-border)}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text-muted);font-size:.875rem;background:var(--color-bg)}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background:var(--color-bg)}"]})}}return o})();export{nt as ReportsComponent};
