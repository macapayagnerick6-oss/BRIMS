import{d as B,e as j,f as F,g as H}from"./chunk-BRLNKSN4.js";import"./chunk-KPGMZ2XY.js";import{a as q,d as Q}from"./chunk-DUWH3AKD.js";import{$a as o,Ab as P,Ea as C,Ia as y,Sa as g,Ta as f,Tb as D,Ua as _,Vb as A,X as m,Xa as S,Y as p,Ya as L,Z as v,Za as M,_ as k,_a as i,ab as b,bb as h,cb as c,db as d,fb as E,gb as T,hb as V,kb as I,lb as l,mb as x,ub as z,vb as R,wa as w,xa as r,yb as O}from"./chunk-PQPYQFLK.js";var Y=["profileMenu"],G=n=>({exact:n}),U=()=>["/staff/settings"],$=(n,s)=>s.path;function J(n,s){if(n&1){let e=h();i(0,"button",17),c("click",function(){m(e);let t=d();return p(t.toggleMobileMenu())}),i(1,"span",18),l(2,"\u2630"),o()()}if(n&2){let e=d();g("aria-label","Toggle menu")("aria-expanded",e.isMobileMenuOpen)}}function K(n,s){if(n&1){let e=h();i(0,"div",19),c("click",function(){m(e);let t=d();return p(t.closeMobileMenu())}),o()}}function N(n,s){if(n&1){let e=h();i(0,"a",20),c("click",function(){m(e);let t=d();return p(t.closeMobileMenu())}),i(1,"span",21),l(2),o(),i(3,"span"),l(4),o()()}if(n&2){let e=s.$implicit;M("routerLink",e.path)("routerLinkActiveOptions",R(4,G,e.path==="/staff/dashboard")),r(2),x(e.icon),r(2),x(e.label)}}function X(n,s){if(n&1){let e=h();i(0,"div",27)(1,"a",30),c("click",function(){m(e);let t=d(2);return p(t.closeProfileMenu())}),i(2,"span",31),l(3,"\u2699"),o(),l(4," Settings "),o(),i(5,"button",32),c("click",function(){m(e);let t=d(2);return t.logout(),p(t.closeProfileMenu())}),i(6,"span",31),l(7,"\u238B"),o(),l(8," Logout "),o()()}n&2&&(r(),M("routerLink",z(1,U)))}function Z(n,s){n&1&&(v(),i(0,"svg",29),b(1,"circle",33)(2,"path",34),o())}function ee(n,s){n&1&&(v(),i(0,"svg",29),b(1,"path",35),o())}function te(n,s){if(n&1){let e=h();i(0,"div",22,0)(2,"button",23),c("click",function(){m(e);let t=d();return p(t.toggleProfileMenu())}),v(),i(3,"svg",24),b(4,"circle",25)(5,"path",26),o()(),f(6,X,9,2,"div",27),o(),k(),i(7,"button",28),c("click",function(){m(e);let t=d();return p(t.theme.toggleTheme())}),f(8,Z,3,0,":svg:svg",29)(9,ee,2,0,":svg:svg",29),o()}if(n&2){let e=d();r(2),g("aria-label","Profile menu")("aria-expanded",e.isProfileMenuOpen),r(4),_(e.isProfileMenuOpen?6:-1),r(),g("aria-label",e.theme.isDark()?"Switch to light mode":"Switch to dark mode"),r(),_(e.theme.isDark()?8:9)}}function ne(n,s){if(n&1&&(i(0,"a",16)(1,"span",36),l(2,"+"),o(),i(3,"span",37),l(4),o()()),n&2){let e=s;M("routerLink",e.link),g("aria-label",e.label),r(4),x(e.label)}}var me=(()=>{class n{constructor(e,a,t){this.auth=e,this.theme=a,this.router=t,this.isMobileMenuOpen=!1,this.isProfileMenuOpen=!1,this.currentTime=new Date,this.navItems=[{path:"/staff/dashboard",label:"Dashboard",icon:"\u{1F532}"},{path:"/staff/qr-scanner",label:"QR Scanner",icon:"\u{1F4F7}"},{path:"/staff/requests",label:"Requests",icon:"\u{1F4CB}"},{path:"/staff/residents",label:"Residents",icon:"\u{1F465}"},{path:"/staff/households",label:"Households",icon:"\u{1F3E0}"},{path:"/staff/reports",label:"Reports",icon:"\u{1F4CA}"},{path:"/staff/sms",label:"SMS & Email",icon:"\u{1F4E8}"},{path:"/staff/users",label:"Users & Roles",icon:"\u{1F464}"},{path:"/staff/audit-log",label:"Audit Log",icon:"\u{1F4DC}"}]}get fabLink(){let e=this.router.url;return e==="/staff/residents"||e.startsWith("/staff/residents?")?{link:"/staff/residents/add",label:"Add Resident"}:e==="/staff/households"||e.startsWith("/staff/households?")?{link:"/staff/households/add",label:"Add Household"}:null}get showTopRightUi(){let e=this.router.url;return!(e.startsWith("/staff/households/map")||e.includes("/settings")||e.includes("/residents/add")||e.includes("/households/add")||e.includes("/households/")&&e.includes("/edit")||e.includes("/qr-scanner")||/^\/staff\/residents\/[^/]+$/.test(e)||e.startsWith("/staff/requests/")&&e!=="/staff/requests")}ngOnInit(){this.timeInterval=setInterval(()=>{this.currentTime=new Date},1e3)}ngOnDestroy(){this.timeInterval&&clearInterval(this.timeInterval)}toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen}closeMobileMenu(){this.isMobileMenuOpen=!1}toggleProfileMenu(){this.isProfileMenuOpen=!this.isProfileMenuOpen}closeProfileMenu(){this.isProfileMenuOpen=!1}onDocumentClick(e){this.profileMenuRef?.nativeElement&&!this.profileMenuRef.nativeElement.contains(e.target)&&this.closeProfileMenu()}logout(){this.auth.logout(),window.location.href="/login"}static{this.\u0275fac=function(a){return new(a||n)(C(Q),C(q),C(j))}}static{this.\u0275cmp=y({type:n,selectors:[["app-staff-layout"]],viewQuery:function(a,t){if(a&1&&E(Y,5),a&2){let u;T(u=V())&&(t.profileMenuRef=u.first)}},hostBindings:function(a,t){a&1&&c("click",function(W){return t.onDocumentClick(W)},w)},decls:24,vars:15,consts:[["profileMenu",""],[1,"staff-layout"],["type","button",1,"mobile-menu-toggle"],[1,"sidebar-backdrop"],[1,"sidebar"],[1,"sidebar-header"],["src","/assets/images/FOR-DASHBOARD.png","alt","Logo",1,"logo"],["type","button",1,"sidebar-close",3,"click"],[1,"sidebar-nav"],["routerLinkActive","active",1,"nav-item",3,"routerLink","routerLinkActiveOptions"],[1,"sidebar-footer"],[1,"time-display"],[1,"time-display__time"],[1,"time-display__date"],[1,"main"],[1,"content"],[1,"fab",3,"routerLink"],["type","button",1,"mobile-menu-toggle",3,"click"],[1,"mobile-menu-icon"],[1,"sidebar-backdrop",3,"click"],["routerLinkActive","active",1,"nav-item",3,"click","routerLink","routerLinkActiveOptions"],[1,"nav-icon"],[1,"profile-menu"],["type","button",1,"profile-menu__trigger",3,"click"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","aria-hidden","true",1,"profile-menu__icon"],["cx","12","cy","8","r","3"],["d","M5 20v-2a5 5 0 0 1 10 0v2"],[1,"profile-menu__dropdown"],["type","button",1,"theme-toggle",3,"click"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","aria-hidden","true",1,"theme-toggle__icon"],[1,"profile-menu__item",3,"click","routerLink"],[1,"profile-menu__item-icon"],["type","button",1,"profile-menu__item","profile-menu__item--logout",3,"click"],["cx","12","cy","12","r","5"],["d","M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"],["d","M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"],[1,"fab__icon"],[1,"fab__label"]],template:function(a,t){if(a&1&&(i(0,"div",1),f(1,J,3,2,"button",2),f(2,K,1,0,"div",3),i(3,"aside",4)(4,"div",5),b(5,"img",6),i(6,"button",7),c("click",function(){return t.closeMobileMenu()}),l(7," \u2715 "),o()(),i(8,"nav",8),S(9,N,5,6,"a",9,$),o(),i(11,"div",10)(12,"div",11)(13,"div",12),l(14),O(15,"date"),o(),i(16,"div",13),l(17),O(18,"date"),o()()()(),i(19,"div",14)(20,"main",15),b(21,"router-outlet"),o()(),f(22,te,10,5),f(23,ne,5,3,"a",16),o()),a&2){let u;r(),_(t.isMobileMenuOpen?-1:1),r(),_(t.isMobileMenuOpen?2:-1),r(),I("sidebar--open",t.isMobileMenuOpen),r(3),g("aria-label","Close menu"),r(3),L(t.navItems),r(5),x(P(15,9,t.currentTime,"h:mm:ss a")),r(3),x(P(18,12,t.currentTime,"EEEE, MMMM d, y")),r(5),_(t.showTopRightUi?22:-1),r(),_((u=t.fabLink)?23:-1,u)}},dependencies:[A,B,F,H,D],styles:[".staff-layout[_ngcontent-%COMP%]{display:flex;min-height:100vh;position:relative}.mobile-menu-toggle[_ngcontent-%COMP%]{display:none;position:fixed;top:16px;left:16px;z-index:1000;width:44px;height:44px;border:1px solid var(--color-border);border-radius:var(--radius);background:var(--color-bg-card);box-shadow:var(--shadow);cursor:pointer;align-items:center;justify-content:center;transition:background .2s}@media(max-width:1023px){.mobile-menu-toggle[_ngcontent-%COMP%]{display:flex}}.mobile-menu-toggle[_ngcontent-%COMP%]:hover{background:var(--color-bg)}.mobile-menu-toggle[_ngcontent-%COMP%]   .mobile-menu-icon[_ngcontent-%COMP%]{font-size:1.25rem;line-height:1}.sidebar-backdrop[_ngcontent-%COMP%]{display:none}@media(max-width:1023px){.sidebar-backdrop[_ngcontent-%COMP%]{display:block;position:fixed;inset:0;background:#0006;backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px);z-index:998;animation:_ngcontent-%COMP%_fadeIn .2s ease-out}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.sidebar[_ngcontent-%COMP%]{width:320px;background:var(--sidebar-bg);color:var(--sidebar-text);flex-shrink:0;display:flex;flex-direction:column;transition:transform .3s ease-out}@media(max-width:1023px){.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;bottom:0;z-index:999;transform:translate(-100%);box-shadow:var(--shadow-lg)}.sidebar.sidebar--open[_ngcontent-%COMP%]{transform:translate(0)}}@media(max-width:640px){.sidebar[_ngcontent-%COMP%]{width:280px}}.sidebar-header[_ngcontent-%COMP%]{padding:1.5rem 1rem;display:flex;align-items:center;justify-content:center;position:relative}.sidebar-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:200px;height:200px;object-fit:contain;flex-shrink:0}@media(max-width:1023px){.sidebar-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:150px;height:150px}}@media(max-width:640px){.sidebar-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:120px;height:120px}}.sidebar-header[_ngcontent-%COMP%]   .sidebar-close[_ngcontent-%COMP%]{display:none}@media(max-width:1023px){.sidebar-header[_ngcontent-%COMP%]   .sidebar-close[_ngcontent-%COMP%]{display:flex;position:absolute;top:1rem;right:1rem;width:32px;height:32px;align-items:center;justify-content:center;border:none;background:var(--sidebar-close-bg);color:var(--sidebar-text-active);border-radius:var(--radius);cursor:pointer;font-size:1.25rem;line-height:1;transition:background .2s}.sidebar-header[_ngcontent-%COMP%]   .sidebar-close[_ngcontent-%COMP%]:hover{background:var(--sidebar-close-hover-bg)}}.sidebar-nav[_ngcontent-%COMP%]{padding:.5rem 0;flex:1;overflow-y:auto}.sidebar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 1rem;color:var(--sidebar-text);text-decoration:none;font-size:.9375rem;transition:background .2s,color .2s}@media(max-width:640px){.sidebar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{padding:10px .875rem;font-size:.875rem}}.sidebar-nav[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]{background:var(--sidebar-active);color:var(--sidebar-text-active)}.sidebar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover:not(.active){background:var(--sidebar-nav-hover-bg);color:var(--sidebar-nav-hover-color)}.sidebar-nav[_ngcontent-%COMP%]   .nav-item--logout[_ngcontent-%COMP%]{cursor:pointer}.sidebar-nav[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]{font-size:1.1rem;opacity:.9;flex-shrink:0}@media(max-width:640px){.sidebar-nav[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]{font-size:1rem}}.sidebar-footer[_ngcontent-%COMP%]{padding:1rem;border-top:1px solid var(--sidebar-border);flex-shrink:0}.sidebar-footer[_ngcontent-%COMP%]   .time-display[_ngcontent-%COMP%]{text-align:center;color:var(--sidebar-text);padding:.75rem 1rem;background:var(--sidebar-footer-bg);border-radius:var(--radius);width:100%;box-sizing:border-box}.sidebar-footer[_ngcontent-%COMP%]   .time-display__time[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:var(--sidebar-text-active);margin-bottom:.25rem;font-variant-numeric:tabular-nums}@media(max-width:640px){.sidebar-footer[_ngcontent-%COMP%]   .time-display__time[_ngcontent-%COMP%]{font-size:1.25rem}}.sidebar-footer[_ngcontent-%COMP%]   .time-display__date[_ngcontent-%COMP%]{font-size:.875rem;color:var(--sidebar-text);opacity:.9}@media(max-width:640px){.sidebar-footer[_ngcontent-%COMP%]   .time-display__date[_ngcontent-%COMP%]{font-size:.75rem}}.main[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;min-width:0;width:100%}@media(max-width:1023px){.main[_ngcontent-%COMP%]{width:100%}}.content[_ngcontent-%COMP%]{flex:1;padding:1.5rem;overflow:auto}.content[_ngcontent-%COMP%]     router-outlet+*{animation:_ngcontent-%COMP%_contentFadeIn .3s ease-out}@media(max-width:1023px){.content[_ngcontent-%COMP%]{padding-top:calc(1.5rem + 60px)}}@media(max-width:768px){.content[_ngcontent-%COMP%]{padding:1rem;padding-top:calc(1rem + 60px)}}@media(max-width:640px){.content[_ngcontent-%COMP%]{padding:.75rem;padding-top:calc(.75rem + 60px)}}@keyframes _ngcontent-%COMP%_contentFadeIn{0%{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}.profile-menu[_ngcontent-%COMP%]{position:fixed;top:24px;right:24px;z-index:1000}@media(max-width:1023px){.profile-menu[_ngcontent-%COMP%]{top:24px;right:24px}}@media(max-width:640px){.profile-menu[_ngcontent-%COMP%]{top:20px;right:20px}}.profile-menu__trigger[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:50%;border:1px solid var(--color-border);background:var(--color-bg-card);color:var(--color-text);box-shadow:var(--shadow);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background .2s,box-shadow .2s}.profile-menu__trigger[_ngcontent-%COMP%]:hover{background:var(--color-bg);box-shadow:var(--shadow-lg)}@media(max-width:640px){.profile-menu__trigger[_ngcontent-%COMP%]{width:40px;height:40px}}.profile-menu__icon[_ngcontent-%COMP%]{width:22px;height:22px;flex-shrink:0}@media(max-width:640px){.profile-menu__icon[_ngcontent-%COMP%]{width:20px;height:20px}}.profile-menu__dropdown[_ngcontent-%COMP%]{position:absolute;top:calc(100% + 8px);right:0;min-width:180px;background:var(--color-bg-card);border:1px solid var(--color-border);border-radius:var(--radius);box-shadow:var(--shadow-lg);padding:.5rem 0;animation:_ngcontent-%COMP%_profileDropdownIn .2s ease-out}@keyframes _ngcontent-%COMP%_profileDropdownIn{0%{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:translateY(0)}}.profile-menu__item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;width:100%;padding:10px 1rem;border:none;background:none;color:var(--color-text);font-size:.9375rem;font-family:inherit;text-decoration:none;text-align:left;cursor:pointer;transition:background .2s}.profile-menu__item[_ngcontent-%COMP%]:hover{background:var(--color-bg)}.profile-menu__item--logout[_ngcontent-%COMP%]:hover{color:var(--color-error, #dc2626)}.profile-menu__item-icon[_ngcontent-%COMP%]{font-size:1rem;opacity:.9;flex-shrink:0}"]})}}return n})();export{me as StaffLayoutComponent};
