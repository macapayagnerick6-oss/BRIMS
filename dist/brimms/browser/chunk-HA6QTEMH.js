import{b as E,c as R,d as T,e as D,f as V,g as W,o as j}from"./chunk-KYS23DP7.js";import{c as O,e as S}from"./chunk-BRLNKSN4.js";import"./chunk-KPGMZ2XY.js";import{d as k}from"./chunk-DUWH3AKD.js";import{$a as n,Ea as u,Ia as P,Ta as w,Ua as f,Vb as v,X as c,Y as m,Za as p,_a as t,ab as b,bb as M,cb as x,db as l,lb as r,mb as y,qb as _,rb as C,sb as h,xa as a}from"./chunk-PQPYQFLK.js";function z(i,g){if(i&1&&(t(0,"p",17),r(1),n()),i&2){let e=l(2);a(),y(e.error)}}function N(i,g){i&1&&r(0," Resetting... ")}function L(i,g){i&1&&r(0," Reset Password ")}function B(i,g){if(i&1){let e=M();t(0,"form",8),x("ngSubmit",function(){c(e);let o=l();return m(o.onSubmit())}),t(1,"div",9)(2,"label",10),r(3,"Email"),n(),t(4,"span",11),r(5,"\u2709"),n(),t(6,"input",12),h("ngModelChange",function(o){c(e);let d=l();return C(d.email,o)||(d.email=o),m(o)}),n()(),t(7,"div",9)(8,"label",13),r(9,"New Password"),n(),t(10,"span",11),r(11,"\u{1F512}"),n(),t(12,"input",14),h("ngModelChange",function(o){c(e);let d=l();return C(d.password,o)||(d.password=o),m(o)}),n()(),t(13,"div",9)(14,"label",15),r(15,"Confirm New Password"),n(),t(16,"span",11),r(17,"\u{1F512}"),n(),t(18,"input",16),h("ngModelChange",function(o){c(e);let d=l();return C(d.confirmPassword,o)||(d.confirmPassword=o),m(o)}),n()(),w(19,z,2,1,"p",17),t(20,"button",18),w(21,N,1,0)(22,L,1,0),n(),t(23,"a",19),x("click",function(){c(e);let o=l();return m(o.backToLogin())}),r(24,"Back to Login"),n()()}if(i&2){let e=l();a(6),_("ngModel",e.email),p("disabled",!0),a(6),_("ngModel",e.password),p("disabled",e.loading),a(6),_("ngModel",e.confirmPassword),p("disabled",e.loading),a(),f(e.error?19:-1),a(),p("disabled",e.loading),a(),f(e.loading?21:22)}}function I(i,g){i&1&&(t(0,"div",7)(1,"div",20),r(2,"\u2713"),n(),t(3,"h2"),r(4,"Password Reset Successful"),n(),t(5,"p"),r(6,"Your password has been reset successfully. Redirecting to login..."),n()())}var J=(()=>{class i{constructor(e,s,o){this.auth=e,this.router=s,this.route=o,this.token="",this.email="",this.password="",this.confirmPassword="",this.error="",this.success=!1,this.loading=!1}ngOnInit(){this.route.queryParams.subscribe(e=>{this.token=e.token||"",this.email=e.email||"",(!this.token||!this.email)&&(this.error="Invalid reset link. Please request a new password reset.")})}onSubmit(){if(!this.password||!this.confirmPassword){this.error="Please fill in all fields.";return}if(this.password!==this.confirmPassword){this.error="Passwords do not match.";return}if(this.password.length<8){this.error="Password must be at least 8 characters long.";return}this.error="",this.loading=!0,setTimeout(()=>{let e=this.auth.resetPassword(this.token,this.email,this.password);this.loading=!1,e.success?(this.success=!0,setTimeout(()=>{this.router.navigate(["/login"])},2e3)):this.error=e.message||"Failed to reset password. Please try again."},1e3)}backToLogin(){this.router.navigate(["/login"])}static{this.\u0275fac=function(s){return new(s||i)(u(k),u(S),u(O))}}static{this.\u0275cmp=P({type:i,selectors:[["app-reset-password"]],decls:10,vars:1,consts:[[1,"reset-password-page"],[1,"reset-password-card","card"],[1,"reset-password-logo"],["src","/assets/images/FOR-DASHBOARD.png","alt","Logo",1,"logo"],[1,"reset-password-title"],[1,"reset-password-subtitle"],[1,"reset-password-form"],[1,"success-message"],[1,"reset-password-form",3,"ngSubmit"],[1,"form-group","input-icon"],["for","email"],[1,"icon"],["id","email","type","email","name","email","placeholder","Email","autocomplete","email",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","password"],["id","password","type","password","name","password","placeholder","Enter new password","autocomplete","new-password",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","confirmPassword"],["id","confirmPassword","type","password","name","confirmPassword","placeholder","Confirm new password","autocomplete","new-password",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"reset-password-error"],["type","submit",1,"btn","btn--primary","reset-password-btn",3,"disabled"],[1,"back-link",3,"click"],[1,"success-icon"]],template:function(s,o){s&1&&(t(0,"div",0)(1,"div",1)(2,"div",2),b(3,"img",3),n(),t(4,"h1",4),r(5,"Reset Password"),n(),t(6,"p",5),r(7,"Enter your new password below."),n(),w(8,B,25,9,"form",6)(9,I,7,0,"div",7),n()()),s&2&&(a(8),f(o.success?9:8))},dependencies:[v,j,W,E,R,T,V,D],styles:[".reset-password-page[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px;background:url(/assets/images/BG.jpg) no-repeat center center fixed;background-size:cover}.reset-password-card[_ngcontent-%COMP%]{width:100%;max-width:420px;border-radius:var(--radius-lg);box-shadow:var(--shadow-lg)}.reset-password-logo[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:1rem}.reset-password-logo[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:280px;height:280px;object-fit:contain}.reset-password-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:var(--color-text);text-align:center;margin:0 0 .5rem}.reset-password-subtitle[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-secondary);text-align:center;margin:0 0 1.5rem;line-height:1.5}.reset-password-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.reset-password-form[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{left:12px}.reset-password-form[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding-left:40px}.reset-password-form[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:disabled{background-color:var(--color-bg-secondary);cursor:not-allowed}.reset-password-btn[_ngcontent-%COMP%]{width:100%;padding:12px;margin-top:.5rem;margin-bottom:.75rem}.reset-password-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.back-link[_ngcontent-%COMP%]{display:block;text-align:center;font-size:.875rem;color:var(--color-primary);cursor:pointer;text-decoration:none}.back-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.reset-password-error[_ngcontent-%COMP%]{color:#dc2626;font-size:.875rem;margin:-.5rem 0 .5rem}.success-message[_ngcontent-%COMP%]{text-align:center;padding:1rem 0}.success-message[_ngcontent-%COMP%]   .success-icon[_ngcontent-%COMP%]{width:64px;height:64px;border-radius:50%;background:#10b981;color:#fff;display:flex;align-items:center;justify-content:center;font-size:2rem;margin:0 auto 1rem}.success-message[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--color-text);margin:0 0 .75rem}.success-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-secondary);margin:0;line-height:1.5}"]})}}return i})();export{J as ResetPasswordComponent};
