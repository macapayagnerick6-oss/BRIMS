import{j as F,k as I,o as z}from"./chunk-KYS23DP7.js";import{f as R}from"./chunk-BRLNKSN4.js";import"./chunk-KPGMZ2XY.js";import{c as D,d as k}from"./chunk-DUWH3AKD.js";import{$a as n,Cb as M,Ea as y,Ia as O,Pb as S,Ta as v,Ua as h,Vb as E,Xa as P,Ya as q,Za as f,_a as t,cb as p,db as x,ha as _,kb as C,lb as r,mb as m,nb as u,vb as w,xa as a}from"./chunk-PQPYQFLK.js";var B=o=>["/resident/requests",o],T=(o,c)=>c.id;function N(o,c){if(o&1&&(t(0,"a",28)(1,"div",29),r(2),n(),t(3,"div",30)(4,"div",31)(5,"h3",32),r(6),n(),t(7,"span",33),r(8),n()(),t(9,"p",34),r(10),n(),t(11,"div",35)(12,"span",36),r(13),n(),t(14,"span",37),r(15),n()()(),t(16,"div",38),r(17,"\u2192"),n()()),o&2){let e=c.$implicit,d=x(2);f("routerLink",w(8,B,e.id)),a(2),m(d.getStatusIcon(e.status)),a(4),m(e.type),a(),f("ngClass",d.getStatusBadgeClass(e.status)),a(),u(" ",e.status," "),a(2),m(e.purpose),a(3),u("ID: ",e.id),a(2),u("\u{1F4C5} ",e.date)}}function j(o,c){if(o&1&&P(0,N,18,10,"a",28,T),o&2){let e=x();q(e.filteredRequests())}}function A(o,c){o&1&&r(0," Try adjusting your filters or search query. ")}function L(o,c){o&1&&r(0," You haven't submitted any requests yet. ")}function Q(o,c){o&1&&(t(0,"a",42),r(1," Submit Your First Request "),n())}function Y(o,c){if(o&1&&(t(0,"div",27)(1,"div",39),r(2,"\u{1F4ED}"),n(),t(3,"h3",40),r(4,"No requests found"),n(),t(5,"p",41),v(6,A,1,0)(7,L,1,0),n(),v(8,Q,2,0,"a",42),n()),o&2){let e=x();a(6),h(e.searchQuery()||e.statusFilter()!=="all"?6:7),a(2),h(!e.searchQuery()&&e.statusFilter()==="all"?8:-1)}}var ee=(()=>{class o{constructor(e,d){this.data=e,this.auth=d,this.statusFilter=_("all"),this.searchQuery=_(""),this.sortBy=_("date"),this.sortOrder=_("desc"),this.filteredRequests=M(()=>{let i=[...this.allRequests];this.statusFilter()!=="all"&&(i=i.filter(l=>l.status===this.statusFilter()));let s=this.searchQuery().toLowerCase().trim();return s&&(i=i.filter(l=>l.type.toLowerCase().includes(s)||l.purpose.toLowerCase().includes(s)||l.id.toLowerCase().includes(s))),i.sort((l,b)=>{let g=0;switch(this.sortBy()){case"date":g=l.date.localeCompare(b.date);break;case"type":g=l.type.localeCompare(b.type);break;case"status":g=l.status.localeCompare(b.status);break}return this.sortOrder()==="asc"?g:-g}),i}),this.stats=M(()=>{let i=this.allRequests;return{total:i.length,approved:i.filter(s=>s.status==="Approved").length,pending:i.filter(s=>s.status==="Pending").length,forReview:i.filter(s=>s.status==="For Review").length,rejected:i.filter(s=>s.status==="Rejected").length}})}get allRequests(){let e=this.auth.currentUser;if(!e||e.role!=="resident")return[];let d=this.data.getResidentById(e.id);return this.data.getRequestsByResidentId(d?.residentId??"")}setStatusFilter(e){this.statusFilter.set(e)}onSearchChange(e){let d=e.target;this.searchQuery.set(d.value)}setSort(e){this.sortBy()===e?this.sortOrder.set(this.sortOrder()==="asc"?"desc":"asc"):(this.sortBy.set(e),this.sortOrder.set("desc"))}getStatusBadgeClass(e){return e==="Approved"?"badge--success":e==="Pending"||e==="For Review"||e==="Rejected"?"badge--warning":""}getStatusIcon(e){return e==="Approved"?"\u2713":e==="Pending"?"\u23F3":e==="For Review"?"\u{1F441}":e==="Rejected"?"\u2717":"\u{1F4C4}"}static{this.\u0275fac=function(d){return new(d||o)(y(D),y(k))}}static{this.\u0275cmp=O({type:o,selectors:[["app-my-requests"]],decls:68,vars:16,consts:[[1,"my-requests"],[1,"page-header"],[1,"page-title"],[1,"stats-grid"],[1,"stat-card","stat-card--total"],[1,"stat-card__icon"],[1,"stat-card__content"],[1,"stat-card__value"],[1,"stat-card__label"],[1,"stat-card","stat-card--approved"],[1,"stat-card","stat-card--pending"],[1,"stat-card","stat-card--review"],[1,"filters-section","card"],[1,"filters-row"],[1,"search-box"],[1,"search-icon"],["type","text","placeholder","Search by type, purpose, or ID...",1,"form-control",3,"input","value"],[1,"filter-group"],[1,"filter-label"],[1,"form-control","form-control--sm",3,"change","value"],["value","all"],["value","Pending"],["value","For Review"],["value","Approved"],[1,"sort-buttons"],[1,"sort-btn",3,"click"],[1,"requests-list","card"],[1,"empty-state"],[1,"request-card",3,"routerLink"],[1,"request-card__icon"],[1,"request-card__content"],[1,"request-card__header"],[1,"request-card__type"],[1,"badge",3,"ngClass"],[1,"request-card__purpose"],[1,"request-card__meta"],[1,"request-card__id"],[1,"request-card__date"],[1,"request-card__arrow"],[1,"empty-state__icon"],[1,"empty-state__title"],[1,"empty-state__message"],["routerLink","/resident/request-certificate",1,"btn","btn--primary"]],template:function(d,i){d&1&&(t(0,"div",0)(1,"div",1)(2,"h1",2),r(3,"My Requests"),n()(),t(4,"div",3)(5,"div",4)(6,"div",5),r(7,"\u{1F4CB}"),n(),t(8,"div",6)(9,"div",7),r(10),n(),t(11,"div",8),r(12,"Total Requests"),n()()(),t(13,"div",9)(14,"div",5),r(15,"\u2713"),n(),t(16,"div",6)(17,"div",7),r(18),n(),t(19,"div",8),r(20,"Approved"),n()()(),t(21,"div",10)(22,"div",5),r(23,"\u23F3"),n(),t(24,"div",6)(25,"div",7),r(26),n(),t(27,"div",8),r(28,"Pending"),n()()(),t(29,"div",11)(30,"div",5),r(31,"\u{1F441}"),n(),t(32,"div",6)(33,"div",7),r(34),n(),t(35,"div",8),r(36,"For Review"),n()()()(),t(37,"div",12)(38,"div",13)(39,"div",14)(40,"span",15),r(41,"\u{1F50D}"),n(),t(42,"input",16),p("input",function(l){return i.onSearchChange(l)}),n()(),t(43,"div",17)(44,"label",18),r(45,"Status:"),n(),t(46,"select",19),p("change",function(l){return i.setStatusFilter(l.target.value)}),t(47,"option",20),r(48,"All"),n(),t(49,"option",21),r(50,"Pending"),n(),t(51,"option",22),r(52,"For Review"),n(),t(53,"option",23),r(54,"Approved"),n()()(),t(55,"div",17)(56,"label",18),r(57,"Sort by:"),n(),t(58,"div",24)(59,"button",25),p("click",function(){return i.setSort("date")}),r(60),n(),t(61,"button",25),p("click",function(){return i.setSort("type")}),r(62),n(),t(63,"button",25),p("click",function(){return i.setSort("status")}),r(64),n()()()()(),t(65,"div",26),v(66,j,2,0)(67,Y,9,2,"div",27),n()()),d&2&&(a(10),m(i.stats().total),a(8),m(i.stats().approved),a(8),m(i.stats().pending),a(8),m(i.stats().forReview),a(8),f("value",i.searchQuery()),a(4),f("value",i.statusFilter()),a(13),C("sort-btn--active",i.sortBy()==="date"),a(),u(" Date ",i.sortBy()==="date"?i.sortOrder()==="asc"?"\u2191":"\u2193":""," "),a(),C("sort-btn--active",i.sortBy()==="type"),a(),u(" Type ",i.sortBy()==="type"?i.sortOrder()==="asc"?"\u2191":"\u2193":""," "),a(),C("sort-btn--active",i.sortBy()==="status"),a(),u(" Status ",i.sortBy()==="status"?i.sortOrder()==="asc"?"\u2191":"\u2193":""," "),a(2),h(i.filteredRequests().length>0?66:67))},dependencies:[E,S,R,z,F,I],styles:[".my-requests[_ngcontent-%COMP%]{width:100%}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;gap:1rem}@media(max-width:640px){.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}}.page-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin:0;color:var(--color-text)}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;margin-bottom:1.5rem}@media(max-width:640px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}.stat-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1.25rem;background:var(--color-bg-card);border:1px solid var(--color-border);border-radius:var(--radius-lg);transition:all .2s ease}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow)}.stat-card__icon[_ngcontent-%COMP%]{font-size:2rem;line-height:1;flex-shrink:0}.stat-card__content[_ngcontent-%COMP%]{flex:1;min-width:0}.stat-card__value[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:var(--color-text);line-height:1.2;margin-bottom:.25rem}.stat-card__label[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-muted);font-weight:500}.stat-card--total[_ngcontent-%COMP%]{border-color:#3b82f6;background:linear-gradient(135deg,#3b82f61a,#3b82f60d)}.stat-card--approved[_ngcontent-%COMP%]{border-color:#10b981;background:linear-gradient(135deg,#10b9811a,#10b9810d)}.stat-card--pending[_ngcontent-%COMP%]{border-color:#f59e0b;background:linear-gradient(135deg,#f59e0b1a,#f59e0b0d)}.stat-card--review[_ngcontent-%COMP%]{border-color:#8b5cf6;background:linear-gradient(135deg,#8b5cf61a,#8b5cf60d)}.filters-section[_ngcontent-%COMP%]{margin-bottom:1.5rem;padding:1.25rem!important}.filters-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex-wrap:wrap}@media(max-width:768px){.filters-row[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}}.search-box[_ngcontent-%COMP%]{flex:1;min-width:300px;position:relative;display:flex;align-items:center}.search-box[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:.875rem;font-size:1.125rem;color:var(--color-text-muted);pointer-events:none;z-index:1}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem .75rem 2.75rem;font-size:1rem;min-height:44px;line-height:1.5}@media(max-width:768px){.search-box[_ngcontent-%COMP%]{min-width:100%}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.75rem 1rem .75rem 2.5rem;font-size:.9375rem;min-height:40px}.search-box[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{left:.75rem;font-size:1rem}}.filter-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.filter-group[_ngcontent-%COMP%]   .filter-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text-muted);white-space:nowrap}.sort-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap}.sort-btn[_ngcontent-%COMP%]{padding:.5rem .75rem;font-size:.875rem;background:var(--color-bg);border:1px solid var(--color-border);border-radius:var(--radius);color:var(--color-text-muted);cursor:pointer;transition:all .2s ease;white-space:nowrap}.sort-btn[_ngcontent-%COMP%]:hover{background:var(--color-bg-card);border-color:var(--color-primary);color:var(--color-text)}.sort-btn--active[_ngcontent-%COMP%]{background:var(--color-primary);border-color:var(--color-primary);color:#fff;font-weight:500}.requests-list[_ngcontent-%COMP%]{padding:0!important;overflow:hidden}.request-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1.25rem 1.5rem;border-bottom:1px solid var(--color-border);text-decoration:none;color:inherit;transition:all .2s ease;cursor:pointer}.request-card[_ngcontent-%COMP%]:hover{background:var(--color-bg-card);transform:translate(4px)}.request-card[_ngcontent-%COMP%]:last-child{border-bottom:none}@media(max-width:640px){.request-card[_ngcontent-%COMP%]{padding:1rem;gap:.75rem}}.request-card__icon[_ngcontent-%COMP%]{font-size:2rem;line-height:1;flex-shrink:0;width:48px;height:48px;display:flex;align-items:center;justify-content:center;background:var(--color-bg);border-radius:var(--radius);border:1px solid var(--color-border)}.request-card__content[_ngcontent-%COMP%]{flex:1;min-width:0}.request-card__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:1rem;margin-bottom:.5rem}@media(max-width:640px){.request-card__header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem}}.request-card__type[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:var(--color-text);margin:0;flex:1;min-width:0}.request-card__purpose[_ngcontent-%COMP%]{font-size:.9375rem;color:var(--color-text-muted);margin:0 0 .5rem;line-height:1.5}.request-card__meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;font-size:.875rem;color:var(--color-text-muted);flex-wrap:wrap}.request-card__id[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-weight:500}.request-card__date[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem}.request-card__arrow[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--color-text-muted);flex-shrink:0;transition:transform .2s ease}.request-card[_ngcontent-%COMP%]:hover   .request-card__arrow[_ngcontent-%COMP%]{transform:translate(4px);color:var(--color-primary)}.empty-state[_ngcontent-%COMP%]{padding:3rem 1.5rem;text-align:center}.empty-state__icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem;opacity:.5}.empty-state__title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--color-text);margin:0 0 .5rem}.empty-state__message[_ngcontent-%COMP%]{font-size:.9375rem;color:var(--color-text-muted);margin:0 0 1.5rem;max-width:400px;margin-left:auto;margin-right:auto}"]})}}return o})();export{ee as MyRequestsComponent};
