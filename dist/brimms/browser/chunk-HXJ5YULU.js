import{a as x}from"./chunk-OCKJNETE.js";import{a as P}from"./chunk-6RFJ52Y7.js";import{b as y,c as M,d as S,e as C,f as E,g as v,o as w}from"./chunk-KYS23DP7.js";import"./chunk-KPGMZ2XY.js";import{$a as n,Ea as u,Ia as f,Vb as h,Za as m,_a as i,cb as b,lb as a,nb as _,qb as c,rb as g,sb as p,xa as l}from"./chunk-PQPYQFLK.js";var T=(()=>{class d{constructor(s,o){this.emailService=s,this.notifications=o,this.email="",this.subject="",this.message="",this.isSending=!1}send(){let s=this.email.trim(),o=this.subject.trim(),e=this.message.trim();if(!s||!o||!e){this.notifications.warning("Please enter email, subject, and message.","Missing information");return}this.isSending=!0,this.emailService.sendEmail({to:s,subject:o,message:e}).subscribe({next:r=>{r.success?(this.notifications.success("Email sent successfully.","Email Notification"),this.email="",this.subject="",this.message=""):this.notifications.error(r.error||"Failed to send email.","Email Error")},error:r=>{console.error("Email send error",r),this.notifications.error("An error occurred while sending email.","Email Error")},complete:()=>{this.isSending=!1}})}static{this.\u0275fac=function(o){return new(o||d)(u(x),u(P))}}static{this.\u0275cmp=f({type:d,selectors:[["app-admin-email-broadcast"]],decls:20,vars:8,consts:[[1,"email-broadcast"],[1,"email-broadcast__title"],[1,"email-broadcast__subtitle"],[1,"email-broadcast__form",3,"ngSubmit"],[1,"form-field"],["for","email",1,"form-label"],["id","email","name","email","type","email","placeholder","resident@example.com",1,"form-input",3,"ngModelChange","ngModel","disabled"],["for","subject",1,"form-label"],["id","subject","name","subject","type","text","placeholder","Subject line",1,"form-input",3,"ngModelChange","ngModel","disabled"],["for","message",1,"form-label"],["id","message","name","message","rows","5","placeholder","Type your email message here...",1,"form-textarea",3,"ngModelChange","ngModel","disabled"],["type","submit",1,"btn","btn--primary",3,"disabled"]],template:function(o,e){o&1&&(i(0,"div",0)(1,"h1",1),a(2,"Email Notifications"),n(),i(3,"p",2),a(4," Send a one-time email notification to a resident. For demo purposes, this sends directly to an email address. In production, you might select residents from the database instead. "),n(),i(5,"form",3),b("ngSubmit",function(){return e.send()}),i(6,"div",4)(7,"label",5),a(8,"Recipient email address"),n(),i(9,"input",6),p("ngModelChange",function(t){return g(e.email,t)||(e.email=t),t}),n()(),i(10,"div",4)(11,"label",7),a(12,"Subject"),n(),i(13,"input",8),p("ngModelChange",function(t){return g(e.subject,t)||(e.subject=t),t}),n()(),i(14,"div",4)(15,"label",9),a(16,"Message"),n(),i(17,"textarea",10),p("ngModelChange",function(t){return g(e.message,t)||(e.message=t),t}),n()(),i(18,"button",11),a(19),n()()()),o&2&&(l(9),c("ngModel",e.email),m("disabled",e.isSending),l(4),c("ngModel",e.subject),m("disabled",e.isSending),l(4),c("ngModel",e.message),m("disabled",e.isSending),l(),m("disabled",e.isSending),l(),_(" ",e.isSending?"Sending\u2026":"Send Email"," "))},dependencies:[h,w,v,y,M,S,E,C],styles:[".email-broadcast[_ngcontent-%COMP%]{max-width:640px;margin:0 auto;padding:1.5rem 1.25rem}.email-broadcast__title[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1.5rem;font-weight:700;color:var(--color-text)}.email-broadcast__subtitle[_ngcontent-%COMP%]{margin:0 0 1.5rem;color:var(--color-text-muted);font-size:.95rem}.email-broadcast__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.form-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.35rem}.form-label[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text)}.form-input[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{border-radius:var(--radius);border:1px solid var(--color-border);padding:.5rem .75rem;font-size:.95rem;background-color:var(--color-bg);color:var(--color-text)}.form-input[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 1px var(--color-primary-soft)}.form-textarea[_ngcontent-%COMP%]{resize:vertical}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;padding:.6rem 1.25rem;border-radius:999px;border:none;font-weight:600;cursor:pointer;font-size:.95rem}.btn--primary[_ngcontent-%COMP%]{background-color:var(--color-primary);color:#fff}.btn--primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:default}"]})}}return d})();export{T as AdminEmailBroadcastComponent};
